---
output:
  html_document:
    toc: yes
    toc_float: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# [SLCU R Course](https://tavareshugo.github.io/slcu_r_course/)

## Brief introduction to R

_R_ is a statistical software and programming language. 
This means that, in order to do anything in _R_, we need to write down 
instructions using specific code. 

In this course we will be using RStudio, , which is a program that provides 
with a convenient interface to work with R. 

This is how RStudio tipically looks like:

![](http://www.datacarpentry.org/R-ecology-lesson/img/rstudio-screenshot.png)

There are 4 main panels, and we will learn about them progressively throughout 
the course. 


### Running commands in R

For now, let's focus on the panel on the _bottom left_ called **Console**. This is 
where R commands are executed and give an output.

For example, we can use R as a calculator:

```{r}
# All the basic arithmetic operators in R
3 + 2    # sum
3 - 2    # subtraction
3 * 2    # multiplication
3 / 2    # division
3 ^ 2    # exponentiation
```

Notice that lines starting with `#` symbol are "Comments", which R ignores and 
does not run as code.


### Creating objects

We can store the output of a command in _objects_ that we can name.

To store the result of some operation in a variable we use `<-`, which we can 
think of as an arrow pointing left (note: no spaces between `<` and `-`!).

```{r}
# Store the result of this operation in a variable called "x"
my_variable <- 3 + 2
```

We can then re-use this variable again an again, for example:

```{r}
my_variable + 1
my_variable + 2
my_variable * 2 + 3
```

Note that the value of `my_variable` itself did not change:

```{r}
my_variable
```

But we can change its value by "over-writing" it with a new value:

```{r}
my_variable <- 6
```

Note that the previous value of `my_variable` is lost. If we want it back we'd have to 
run our previous commands again.

> What do you think the value of `my_variable` is after the following command?

```{r, eval = FALSE}
my_variable <- my_variable + 1
```


### Functions

A lot of the functionality in R is in its functions, which allow us to perform 
certain operations (sometimes very complicated ones) with a single command.

We can recognise functions in code easily, because they always follow the pattern:

`function(inputs)`

that is, we have the function's name, then open parenthesis, and inside the parenthesis 
we include all the necessary inputs (_arguments_) that the function needs to perform 
its operations.

We will come across many functions throughout the course, but here's a few examples 
of functions that operate on a single number:

```{r}
# Square root of 3
sqrt(3)

# Round 3.14
round(3.14)
```

We can see that the round function rounds our number to the nearest integer (no 
decimal points). However, we might want to round the number to one, or two, or 
three, etc., decimal points instead. In fact, we can do this with the `round()` 
function, because it accepts extra _arguments_ as its input:

```{r}
# Round 3.14 to the nearest digit
round(3.14, digits = 1)
```

Arguments within functions are separated by a comma `,`. 

But how would we know what that option was called? Or that it even existed? 

The answer is: by looking at its documentation. 
Every function in R has a help page, which we can look at by using `?` followed 
by the function's name, for example `?round`.

From its help page we can see that this function accepts two arguments called 
"x" and "digits". "x" is the number we want to round, and "digits" is the 
number of decimal points we want to round to. 

> Use these examples to understand more about how functions work:

```{r}
round(x = 2.72, digits = 1)
round(digits = 1, x = 2.72)
round(2.72, 1)
round(1, 2.72)
```


## Understanding our directory struture

First of all, let's see what is the _working directory_ that R is using at the 
moment:

```{r}
# Run this line of code by pressing Ctrl + Enter
getwd()
```

With R Markdown files, the working directory is set to the location of the file 
itself.

Our data file is located in a different folder from this document. The file 
structure is, schematically:

```
slcu_r_course
  |
  |_course_data
  |   |
  |   |_dataset_tidy.xls
  |
  |_module01_data_and_files (our working directory)
      |
      |_reading_data.Rmd
```

Therefore, to read our `CSV` file, we will need to tell _R_ to go one 
folder "above" where we are and then into the "course_data" folder. 

We can move to "one directory above" using `../`. For example:

```{r}
# This command lists the files in the directory above the current one
list.files("../")
```

**Changing the code above, can you list the files in the "course_data" folder?**

```{r}
# Complete this code
list.files("<here>")
```


## Reading data into R

To read a `CSV` file into R, we will use a function called `read_csv()`. 

This function is part of a package called `tidyverse`, which we need to load 
first:

```{r, message=FALSE}
library(tidyverse)
```

Now, try to complete the code below to read our data into R:

```{r, eval = FALSE}
# Complete this code:
surveys <- read_csv("<here>")
```

_Note:_ there is another function called `read.csv()`, which is the usual 
default function to read CSV files, and is very similar to `read_csv()`. 
During the workshops we will use `read_csv()` as it is more convenient.


## Homework

Based on the principles outlined in this module, try and organise your files and data, and then open your file into R.

If you encounter any difficulties, we will discuss them in the next module!

